function closePopup(e){e.preventDefault(),($(e.target).hasClass("pokemon-details")||$(e.target).hasClass("pokemon-details__cross"))&&($(".pokemon-details").fadeOut(300),$("body").css("position","static"))}var pokedexApp=angular.module("pokedexApp",[]);pokedexApp.controller("PokedexCtrl",["$scope","$http",function(e,o){$(".pokedex__preloader").addClass("pokedex__preloader--active"),$(".pokedex").addClass("pokedex--hide-filter pokedex--hide-pokemons"),o.get("http://pokeapi.co/api/v1/type/?limit=999").success(function(o){e.pokemonTypes=o,$(".pokedex").removeClass("pokedex--hide-pokemons")}),o.get("http://pokeapi.co/api/v1/pokemon/?limit=12").success(function(o){e.pokemons=o,$(".pokedex__preloader").removeClass("pokedex__preloader--active"),$(".pokedex").removeClass("pokedex--hide-filter")}),e.getInfo=function(n,t){$pokemon=$(t.target).closest(".pokemon"),$pokemon.find(".pokemon__spinner").addClass("pokemon__spinner--active"),$pokemon.find(".pokemon__wrapper").addClass("pokemon__wrapper--inactive"),o.get("http://pokeapi.co/api/v1/pokemon/"+n).success(function(o){e.pokemonInfo=o,$(".pokemon__spinner").removeClass("pokemon__spinner--active"),$(".pokemon__wrapper").removeClass("pokemon__wrapper--inactive"),$(".pokemon-details").css("display","inline-block"),$("body").css({position:"fixed",overflow:"scroll"}),$("#pokemonPic").attr("src","http://pokeapi.co/media/img/"+n+".png")})},e.loadMorePokemons=function(n){$(".btn-more__spinner").addClass("btn-more__spinner--active"),$(".btn-more").addClass("btn-more--inactive"),o.get("http://pokeapi.co/"+n).success(function(o){e.pokemons.meta=o.meta,e.pokemons.objects=e.pokemons.objects.concat(o.objects),$(".btn-more__spinner").removeClass("btn-more__spinner--active"),$(".btn-more").removeClass("btn-more--inactive")}),e.loadMoreButton=!0,e.displayPokemons(e.filterChecked)},e.filterChecked=[],e.removeInitState=function(){var o=e.pokemons.objects;for(var n in o)o[n].checked=!1},e.returnInitState=function(){var o=e.pokemons.objects;for(var n in o)o[n].checked=!0},e.checkAll=function(){e.loadMoreButton=!0,e.filterChecked=[],e.selectedAll=!1,e.returnInitState(),angular.forEach(e.pokemonTypes.objects,function(o){o.selected=e.selectedAll}),e.displayPokemons(e.filterChecked),e.loadMoreButton=!0},e.includeTypes=function(o){var n=o.name.toLowerCase(),t=e.filterChecked.indexOf(n);o.selected?e.filterChecked.push(n):e.filterChecked.splice(t,1),e.displayPokemons(e.filterChecked)},e.displayPokemons=function(o){e.loadMoreButton=!1;var n=e.pokemons.objects;for(var t in n){var s=n[t].types;for(var p in s){var a=o.indexOf(n[t].types[p].name);-1!==a&&(n[t].checked=!0)}}0===e.filterChecked.length?(e.returnInitState(),e.loadMoreButton=!0):20===e.filterChecked.length&&(e.loadMoreButton=!0)}}]),$(document).on("mousedown","#pokemon-details",function(){closePopup(event)});
